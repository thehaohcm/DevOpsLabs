- Question 1: Setup Yum local repostiory using RHEL-9 ISO image mounted on either /mnt 
  Answer:
  1st way (setup an offiline local repository):
    # mount RHEL-9.iso /mnt/disc_rhel9/
    # cp /mnt/media.repo /etc/yum.repos.d/rhel-9.repo
    # chmod 644 /etc/yum.repos.d/rhel-9.repo
    # vim /etc/yum.repos.d/rhel-9.repo
    [Local-BaseOS]
    name=Red Hat Enterprise Linux 9 - BaseOS
    metadata_expire=-1
    gpgcheck=1
    enabled=1
    baseurl=file:///mnt/disc_rhel9//BaseOS
    gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release

    [Local-AppStream]
    name=Red Hat Enterprise Linux 9 - AppStream
    metadata_expire=-1
    gpgcheck=1
    enabled=1
    baseurl=file:///mnt/disc_rhel9/AppStream/
    gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release

    # dnf/yum clean all
    # dnf/yum repolist
    
    # vi /etc/fstab
    /dev/sr0  /mnt/ iso9660 ro,user,auto  0 0
    [esc]
    :wq
    # mount -a

  2nd way (setup an online repository via url):
    # dnf config-manager [repository_url]
    # dnf config-manager --add-repo [repository_url]
    # dnf update

- Question 2: Modify network interface to static configuration with the following settings:
  IPV4 – 192.168.1.211/24
  GW – 192.168.1.1
  DNS – 8.8.8.8

  Answer:
    # nmcli device
    # nmcli connection modify enp0s3 ipv4.addresses 192.168.1.211/24
    # nmcli connection modify enp0s3 ipv4.gateway 192.168.1.1
    # nmcli connection modify enp0s3 ipv4.dns 8.8.8.8
    # nmcli connection down enp0s3 && nmcli connection up enp0s3
    # nmcli c reload enp0s3
    # ip address show enp0s3
    # nmcli c show enp0s3 | grep ipv4

- Question : Recovery password
  Answer:
  1. Reboot machine
  2. Press 'e' 
  3. In line starting with 'linux...' -> replace 'ro' with 'rw' and add new word into the end of line: 'init=/bin/bash'
    # passwd root
    # touch /.autorelabel
    # exec /sbin/init
  
- Question: enable ipv4 forward
  Answer:
  # cat /proc/sys/net/ipv4/ip_forward
  # echo net.ipv4.ip_forward=1>>/etc/sysctl.conf
  # sysctl -p
  # cat /proc/sys/net/ipv4/ip_forward
  # sysctl net.ipv4.ip_forward
  
- Question: enable ipv6 forward
  Answer:
    # cat /proc/sys/net/ipv6/conf/all/forwarding
    # echo net.ipv6.conf.all.forwarding=1>>/etc/sysctl.conf
    # sysctl -p
    # cat /proc/sys/net/ipv6/conf/all/forwarding
    # sysctl net.ipv6.config.all.forwarding

- Question: install/update kernel
  Answer:
    # yum/dnf -y update
    # yum/dnf -y update kernel
    # systemctl reboot

- Question: make linux machine boot into the `multi-user.target` by defaul
  Answer:
    # systemctl get-default
    # systemctl set-default multi-user.target

- Question: create a user `sally` whose UID is 5000, and the user has not access to any interactive shell
  Answer:
    # useradd -u 5000 -s /sbin/nologin sally
    # id sally
    # su - sally
  
- Question: configure the system to run in a virtual machine general non-specialized tuned profile
  Answer:
    # tuned-adm list
    # tuned-adm profile balanced/powersave/...
    # tuned-adm active

- Question: configure Apache to serve a basic website that shows the text "hello world" and also enable http/https port on firewall
  Answer:
    # dnf/yum -y install httpd
    # systemctl enable httpd --now
    # systemctl start httpd
    # firewall-cmd --add-service=http --zone=public --permanent
    # firewall-cmd --add-service=https --zone=public --permanent
    # firewall-cmd --reload
    # vi /var/www/html/index.html
    Hello World!
    :wq
    # systemctl restart httpd
    # curl http://localhost

- Question: write a shell named "execmd" in /tmp dir that will execute the following:
  User logged in
  Today's date
  Number of current users logged in
  Answer:
    # vi /tmp/execmd.sh
    #!/bin/bash
    echo "Hello `whoami`"
    echo "Today is `date`"
    echo "Number of user login: `who | wc -l`"
    :wq
    # chmod a+x /tmp/execmd.sh
    # /tmp/execmd.sh

- Question: create a cronjob that run fidsk command `df -h` and ouput /tmp/diskstatus at 4:15 pm daily. The output should append to the file
  Answer:
    # crontab -e
    15 16 * * * df -h >> /tmp/diskstatus
    :wq

- Question: create a "homebackup.tgz" file of /home directory in /Backup directory. Exclude the file type `pdf` while creating the compressed tar file
  Answer:
    # tar -czvf /Backup/backup.tgz /home --exclude=*.pdf

- Question: create a 2G partition, make it as an ext4 file system, mounted on /mnt/data, and auto-mounts at boot-start
  Answer:
    # lsblk
    # fdisk -c /dev/sdb
    n
    p
    1
    Press Enter to confirm the default sector
    +2G
    t
    8e (for Linux LVM)
    p
    w
    # mkfs.ext4 /dev/sdb1
    # mkdir /mnt/data
    # vi /etc/fstab
    /dev/sdb1    /mnt/data    ext4    defaults    0    0
    :wq
    # mount -a
    # lsblk

- Question: create a new 1G swap partition on /dev/sdc1 with partition #1 which takes effect at boot start
  Answer:
    # lsblk
    # fdisk /dev/sdc
    n
    p
    1
    Press Enter to confirm the default sector
    +1G
    p
    t
    l
    82 (for Linux Swap)
    p
    w
    # lsblk
    # mkswap /dev/sdc1
    # vi /etc/fstab
    /dev/sdc1    swap    swap    defaults    0    0
    :wq
    # lsblk
  
- Question: Setup SSH password less login for the user `peter` in `linux4.lab` machine
  Answer:
  # dnf/yum install -y openssh-server
  # firewall-cmd --add-service=ssh --zone=public --permanent
  # firewall-cmd --reload
  # firewall-cmd --list-all
  # ssh-keygen
  Press Enter
  Press Enter
  # ssh-copy-id peter@linux4.lab
  Enter password of `peter`
  # ssh peter@linux4.lab
  
- Question: Disable users' SSH password-less connection requests on linux4.lab
  Answer:
  # vi /etc/ssh/sshd_config
  Uncomment and change
  PermitEmptyPassword no
  PubkeyAuthentication no
  :wq
  # systemctl restart sshd
  
- Question: Change the hostname to `seinfeld.server.com` and make it persistent
  Answer:
  # hostnamectl set-hostname seinfeld.server.com
  # hostnamectl
  
- Question: Use podman to search for the latest release of RedHat Universal Base Image "ubi" container. Then inspect the ubi image using skopeo
  Answer:
  # dnf/yum install -y container-tools
  # podman login registry.redhat.io
  # podman search ubi
  # skopeo inspect docker://registry.redhat.io/ubi9/ubi
  
- Question: Use podman to pull the ubi image
  Answer:
  # podman pull registry.redhat.io/ubi9/ubi
  # podman images
  
- Question: Configure a permanent storage for Journald logs with 100M max use
  Answer:
  # mkdir /var/log/journal
  # echo "SystemMaxUse=100M">>/etc/systemd/journald.conf
  # systemctl restart systemd-journal
  
- Question: Install Apache and allow it to get documents from NFS mounted folder
  Answer:
  # dnf/yum install -y httpd
  # firewall-cmd --add-service=http --zone=public --permanent
  # firewall-cmd --add-service=https --zone=public --permanent
  # firewall-cmd --reload
  # firewall-cmd --list-all
  # systemctl enable httpd --now
  # systemctl start httpd
  # setsebool -P httpd_use_nfs 1
  # getsebool httpd_use_nfs
  
- Question: Find all files in /etc/ directory that were modified more than 90 days ago and ouput to /tmp/90days
  Answer:
  # find /etc/ --type f -mtime +90 > /tmp/90days
  
- Question: Create a backup file named /root/backup.tar.bz2, contains the content of /usr/local, tar must be bzip2 to compress
  Answer:
  # tar -cvfj /root/backup.tar.bz2 /usr/local
  
- Question: Create a directory /data and only the user owner and group owner member can have full access
  Answer:
  # mkdir /data
  # chmod og+a /data

- Question: Set SELinux to "permissive" mode
  Answer:
  # sestatus
  # vi /etc/selinux/config
  SELINUX=permissive
  :wq
  # setenforce permissive
  # getenforce
  # sestatus
  
Question: Enable boot messages:
Answer:
  # vi /etc/default/grub
  In "GRUB_CMDLINE_LINUX" line, remove "rhgb quite"
  :wq
  # grub2-mkconfig -o /boot/grub2/grub.cfg
  # systemctl reboot

Question: set user expired day after 90 days and must be at least 8 characters in length
Answer:
  # vi /etc/login.defs
  PASS_MAX_DAYS 90
  :wq
  # vi /etc/security/pwquality.conf
  minlen = 8
  :wq
  
Question: create a job that write "These pretzels are making me thirsty!" to the message log file in /var/log dir at 12pm only on weekdays
Answer:
  # crontab -e
  0 12 * * 1-5 logger "These pretzels are making me thirsty!"
  :wq
  
Question: Reset password of root account in Linux machine to `Password123`
Answer:
  type e
  go to a line has prefix is "linux="
  find and replace "ro" to "rw" and add "init=/bin/bash" into the end of this line
  press ctrl + e
  # passwd
  type Password123
  type Password123
  # touch /.autorelabel
  # exec /sbin/init
 
Question: automatically create a new file named `HelloWorld` into all new users
Answer:
  # touch /etc/skel/HelloWorld
  
Question: Disable password authentication

Question: Setup SSH Passwordless Login in one server for the user Sam

Question: on /dev/sdb create a 500MiB swap partition which takes effect automatically at boot start
Answer:
  # lsblk
  # fdisk /dev/sdb
  type n
  enter
  enter
  +500M
  t
  82 (Linux SWAP)
  p
  w
  # lsblk
  # mkswap /dev/sdb[num]
  # vi /etc/fstab
  /dev/sdb[num] swap  swap  defaults  0 0
  [esc]
  :wq
  # mount -a
  # swapon -a 
or# swapon /dev/sdb[num]
  # free -m
  # lsblk

Question: setup a local image repository in /var/lib/registry on port 5000 with Podman
Answer:

Question: push the httpd container image to the image repository
Answer:

Question: add user tom, and grant him root privileges
Answer:
  # useradd tom
  # echo | passwd --stdin "[password]"
  # visudo 
or# vi /etc/sudoers
  tom ALL=(ALL) ALL
  :wq

Question: run "yum update" command with a priority value of "30"
Answer:
  # nice -n 30 yum update
  
Question: configure the server one (NFS client) to automatically mount the share rhcsa.server.com:/share on /nfs directory
Answer:
  # showmount -e rhcsa.server.com
  # mkdir /nfs
  # vi /etc/fstab
  rhcsa.server.com/share  /nfs  nfs_netdev  defaults  0 0
  [esc]
  :wq
  # mount -a 
  # mount | grep nfs
  
Question: Prevent all users from using the crontab command except tom
Answer:
  # echo ALL >> /etc/cron.deny
  # echo tom >> /etc/cron.allow
  
Question: create a directory hierarchy /V1/V2/V3/, and recursively apply the SELinux context of the /etc directory
Answer:

Question: Restrict root login 
Answer:
  # vi /etc/ssh/sshd_config
  PermitRootLogin no
  [esc]
  :wq
  # systemctl restart sshd
  
Question: install the latest kernel
Answer:
  # dnf/yum update
  # dnf/yum update -y kernel
  # systemctl reboot

inspect the ht

Question: set the system time to Asia/Ho_Chi_Minh timezone
Answer:
  # timedatectl list-timzone | grep -e ".*Ho_Chi_Minh.*"
  # timedatectl set-timezone "Asia/Ho_Chi_Minh"
  # timedatectl
  
Question: Ensure NTP sync is configured
Answer:
  # systemctl status chronyd
  
  if `chronyd` is not installed:
  # dnf/yum install -y chrony
  # systemctl enable --now chronyd
  # systemctl start chronyd
  # cat /etc/chrony.conf
  
  # timedatectl set-ntp true
  # timedatectl
  
